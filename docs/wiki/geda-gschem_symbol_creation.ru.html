<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <link rel="stylesheet" media="screen" type="text/css" href="./style.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="./design.css" />
  <link rel="stylesheet" media="print" type="text/css" href="./print.css" />

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>

<p>
<em>Это руководство доступно также на следующих языках:</em>
<a href="geda-gschem_symbol_creation.html" class="wikilink1" title="geda-gschem_symbol_creation.html">English</a>
</p>

<h1 class="sectionedit1" id="руководство_по_созданию_символов_geda_gaf">Руководство по созданию символов gEDA/gaf</h1>
<div class="level1">

<p>
Последняя версия оригинала настоящего документа находится по адресу
<a href="http://www.geda-project.org/wiki/geda:gschem_symbol_creation" class="urlextern" title="http://www.geda-project.org/wiki/geda:gschem_symbol_creation" rel="nofollow">http://www.geda-project.org/wiki/geda:gschem_symbol_creation</a>.<br/>
Настоящий
документ выпущен под лицензией <a href="geda-gfdl.html" class="wikilink1" title="geda-gfdl.html">GNU Free Documentation License
(GFDL)</a>.
</p>

</div>
<!-- EDIT1 SECTION "Руководство по созданию символов gEDA/gaf" [137-545] -->
<h2 class="sectionedit2" id="обзор">Обзор</h2>
<div class="level2">

<p>
В настоящем документе описывается создание
<a href="geda-glossary.ru.html#символ" class="wikilink1" title="geda-glossary.ru.html">символов компонентов</a>, в том числе соглашения по
стилю, советы/подсказки и то, чего стоит остерегаться при вычерчивании
символов для системы gEDA/gaf.
</p>

</div>
<!-- EDIT2 SECTION "Обзор" [546-952] -->
<h2 class="sectionedit3" id="создание_символа_компонента">Создание символа компонента</h2>
<div class="level2">

<p>
Символы компонентов (называемые далее просто «символами») вычерчиваются в
<strong>gschem</strong>. Можно начать с пустой страницы или с заведомо хорошего символа,
похожего на создаваемый вами.
</p>

</div>
<!-- EDIT3 SECTION "Создание символа компонента" [953-1340] -->
<h3 class="sectionedit4" id="подготовка">Подготовка</h3>
<div class="level3">

<p>
Прежде, чем открыть <strong>gschem</strong> и начать чертить символ, задайте себе несколько вопросов, ответы на которые повлияют на то, как это делать:
</p>
<ol>
<li class="level1"><div class="li"> Создаётся ли символ чисто из эстетических соображений (просто как рисунок)? Если так, несколько шагов упрощаются.</div>
</li>
<li class="level1"><div class="li"> Нужно ли будет потом использовать этот компонент для моделирования, например в SPICE?</div>
</li>
<li class="level1"><div class="li"> Нужно ли будет использовать этот символ в схеме, где производится разводка питания? Это будет важно при решении вопроса о том, какие выводы нужно чертить.</div>
</li>
<li class="level1"><div class="li"> Представляет ли этот символ компонент, которых по несколько штук в одном корпусе? Это на языке gEDA называется <a href="geda-glossary.ru.html#назначение_логических_секций" class="wikilink1" title="geda-glossary.ru.html">назначением логических секций</a> и на этот счёт имеются особые правила.</div>
</li>
</ol>

<p>
Когда вы сами для себя ответите на эти вопросы, дальнейшая часть руководства
станет для вас гораздо полезней.
</p>

<p>
Итак, приступим к созданию символа:
</p>
<ol>
<li class="level1"><div class="li"> Откройте <strong>gschem</strong>.</div>
</li>
<li class="level1"><div class="li"> По умолчанию на новых пустых страницах выводятся рамки. Выберите инструмент выделения (в виде чёрной стрелки мыши на панели инструментов) и выделите всё на странице.  Нажмите клавишу <kbd>Delete</kbd>, чтобы всё удалить.</div>
</li>
<li class="level1"><div class="li"> Увеличьте хотя бы раз масштаб (<strong><em>Вид</em></strong> → <strong><em>Увеличить</em></strong> [<strong><em>View</em></strong> → <strong><em>Zoom In</em></strong>], или нажмите клавишу <kbd>Z</kbd>).</div>
</li>
<li class="level1"><div class="li"> Удостоверьтесь, что привязка к сетке ВКЛЮЧЕНА (<strong><em>Настройки</em></strong> → <strong><em>Переключить сетку привязки</em></strong> [<strong><em>Options</em></strong> → <strong><em>Toggle Snap On/Off</em></strong>] или <kbd>O</kbd> <kbd>S</kbd>).</div>
</li>
<li class="level1"><div class="li"> Убедитесь, что шаг сетки привязки установлен в 100 (<strong><em>Настройки</em></strong> → <strong><em>Шаг сетки привязки…</em></strong> [<strong><em>Options</em></strong> → <strong><em>Snap Grid Spacing…</em></strong>] или <kbd>O</kbd> <kbd>Shift</kbd>+<kbd>S</kbd>).</div>
</li>
</ol>

</div>
<!-- EDIT4 SECTION "Подготовка" [1341-4085] -->
<h3 class="sectionedit5" id="черчение_символа">Черчение символа</h3>
<div class="level3">

<p>
С помощью инструментов <code>Линия</code>, <code>Прямоугольник</code>, <code>Окружность</code>,
<code>Дуга</code> (которые можно выбрать в меню <strong><em>Добавить</em></strong> [<strong><em>Add</em></strong>])
создайте условное графическое обозначение своего устройства. Убедитесь, что
единственный цвет, который вы использовали, это &#039;Graphic&#039; (зелёный).  Не
помещайте никаких выводов устройства до следующего шага.
</p>

<p>
Для проверки того, какой цвет используется для черчения, откройте меню
<strong><em>Правка</em></strong> → <strong><em>Цвет…</em></strong> [<strong><em>Edit</em></strong> → <strong><em>Color…</em></strong>] (или
нажмите <kbd>E</kbd> <kbd>O</kbd>).
</p>

</div>
<!-- EDIT5 SECTION "Черчение символа" [4086-4984] -->
<h3 class="sectionedit6" id="размещение_выводов">Размещение выводов</h3>
<div class="level3">

<p>
Если вы решили, что ваш символ будет графическим (т. е. не будет ни к чему
подключаться, а будет просто картинкой), то этот шаг можно пропустить.
</p>

<p>
Добавьте свой первый вывод.
</p>
<ol>
<li class="level1"><div class="li"> Выберите <strong><em>Добавить</em></strong> → <strong><em>Вывод</em></strong> [<strong><em>Add</em></strong> → <strong><em>Pin</em></strong>], или нажмите <kbd>A</kbd> <kbd>P</kbd>. После этого щёлкните в том месте, где должен быть конец вывода, и переместите мышь к краю своего символа. Около вашего нового вывода должны появиться &#039;0&#039; и слово &#039;unknown&#039;. Обратите внимание, что направление вычерчивания выводов важно. Если их чертить от края символа наружу, то текст окажется снаружи символа!</div>
</li>
<li class="level1"><div class="li"> Щёлкните по инструменту выделения и выделите им вывод, который вы только что нарисовали. Цвет самого вывода и относящегося к нему текста должен измениться, а на концах вывода должны появиться квадратики.</div>
</li>
<li class="level1"><div class="li"> Выберите <strong><em>Правка</em></strong> → <strong><em>Правка…</em></strong> [<strong><em>Edit</em></strong> → <strong><em>Edit…</em></strong>] или нажмите <kbd>E</kbd> <kbd>E</kbd> (или щёлкните правой кнопкой и выберите <strong><em>Правка…</em></strong> [<strong><em>Edit…</em></strong>]). Тогда для вывода появится диалоговое окно редактирования.</div>
</li>
</ol>

<p>
В диалоговом окне редактирования своего нового вывода вы должны увидеть
четыре атрибута (четыре пары <code>имя=значение</code>), уже прикреплённых к нему.
Эти атрибуты можно отредактировать, щёлкая сначала по атрибуту в списке
вверху окна редактирования, затем по полю, которое вы хотите изменить.
Учтите, что когда что-то выделено, это не отражается в разделе диалогового
окна <strong>Добавить атрибут</strong>, так как этот раздел предназначен только для
добавления, а не для редактирования уже имеющихся атрибутов.
</p>

<p>
Давайте взглянем на каждый из атрибутов, уже прикреплённых к вашему выводу,
и изменим некоторые значения. Я предлагаю увеличить размер окна
редактирования так, чтобы было видно все атрибуты.
</p>
<ul>
<li class="level1"><div class="li"> У каждого вывода должен быть атрибут <code>pinseq</code>. Это число, определяющее порядок работы программы <strong>gnetlist</strong> с атрибутами. Для нашего первого вывода начнём эту последовательность с &#039;1&#039; и будем последовательно увеличивать этот номер по мере добавления выводов.</div>
</li>
<li class="level1"><div class="li"> У каждого вывода должен быть атрибут <code>pinnumber</code>. Это номер вывода на корпусе компонента, для которого создаётся этот символ. Номер вывода может быть буквенным или цифровым (то есть можно использовать, например, <code>E</code> или <code>C</code>).</div>
</li>
<li class="level1"><div class="li"> У каждого вывода должен быть также атрибут <code>pinlabel</code>. Данный атрибут является названием или меткой вывода (а не номером вывода).</div>
</li>
<li class="level1"><div class="li"> У каждого вывода должен быть также атрибут <code>pintype</code>. Данный атрибут определяет тип вывода.</div>
</li>
<li class="level1"><div class="li"> Атрибуты <code>pinseq</code> и <code>pinnumber</code> нескольких выводов сразу можно пронумеровать автоматически с помощью <strong><em>Атрибуты</em></strong> → <strong><em>Автонумерация…</em></strong> [<strong><em>Attributes</em></strong> → <strong><em>Autonumber Text…</em></strong>].</div>
</li>
</ul>

<p>
Допустимыми значениями <code>pintype</code> являются: <code>in</code>, <code>out</code>, <code>io</code>,
<code>oc</code>, <code>oe</code>, <code>pas</code>, <code>tp</code>, <code>tri</code>, <code>clk</code>, <code>pwr</code>. Более подробную
информацию о нём см. в <a href="geda-master_attributes_list.ru.html#pintype" class="wikilink1" title="geda-master_attributes_list.ru.html">Перечне основных
атрибутов</a>.
</p>

</div>
<!-- EDIT6 SECTION "Размещение выводов" [4985-9939] -->
<h3 class="sectionedit7" id="добавление_атрибутов_к_символу">Добавление атрибутов к символу</h3>
<div class="level3">

<p>
Чтобы использовать символ с пользой в <strong>gschem</strong> и других программах, он
должен содержать несколько атрибутов (в виде пар <code>имя=значение</code>).
</p>

<p>
Сначала мы добавим все нужные нам атрибуты, а затем отключим видимость тех
из них, которые должны быть невидимыми.
</p>
<ol>
<li class="level1"><div class="li"> В символ нужно добавить атрибут <code>device=НАЗВАНИЕ_УСТРОЙСТВА</code>. Название устройства не должно содержать ничего, кроме прописных букв, дефисов, чисел и символов подчёркивания. Если символ определяет чисто графический объект, то значение атрибута <code>device=</code> должно быть <code>none</code> (<code>device=none</code>).</div>
</li>
<li class="level1"><div class="li"> В чисто графический символ (такой как, например, рамка формата основной надписи или символ <em><code>decon</code></em>) следует добавить атрибут <code>graphical=1</code>. Этот атрибут показывает, что содержащий его символ не имеет электрического или схемотехнического назначения. Не забывайте согласно предыдущему требованию устанавливать вместе с данным атрибутом <code>device=none</code>.</div>
</li>
<li class="level1"><div class="li"> В символе должен быть атрибут <code>description=ТЕКСТ</code>. <code>ТЕКСТ</code> должен представлять собой однострочное описание символа.</div>
</li>
<li class="level1"><div class="li"> В символе должен быть атрибут <code>footprint=ИМЯ_КОРПУСА</code>, он может использоваться <a href="geda-glossary.ru.html#генератор_списка_соединений" class="wikilink1" title="geda-glossary.ru.html">генератором списка соединений</a> для <strong>pcb</strong>. <code>ИМЯ_КОРПУСА</code> представляет собой <a href="geda-glossary.ru.html#посадочное_место" class="wikilink1" title="geda-glossary.ru.html">посадочное место</a> для <strong>pcb</strong> или тип корпуса, такой как DIP14 или DIP40. Подробности см. в <a href="geda-pcb_footprint_naming_conventions.ru.html" class="wikilink1" title="geda-pcb_footprint_naming_conventions.ru.html"> Соглашениях по именованию посадочных мест</a>. Если вы используете <strong>gEDA</strong> в связке с <strong>pcb</strong>, то более подробную информацию по данному атрибуту и о том, как его использовать, вы найдёте в <a href="http://pcb.geda-project.org/manual.html" class="urlextern" title="http://pcb.geda-project.org/manual.html" rel="nofollow">документации по pcb</a> и в <em><code>gnetlist/docs/README.pcb</code></em>.</div>
</li>
<li class="level1"><div class="li"> Атрибут <code>refdes=</code> должен помещаться во все символы, не являющиеся чисто графическими. Значение данного атрибута по умолчанию для микросхем должно быть <code>U?</code>, а для транзисторов <code>T?</code>. Видимым следует сделать только его значение и, когда символ будет помещён в схему, данный атрибут будет вынесен (прикреплён вне символа для обеспечения возможности его редактирования).</div>
</li>
<li class="level1"><div class="li"> Атрибут <code>numslots=</code> нужно добавлять во все символы, чтобы предотвратить предупреждения, выдаваемые программой <strong>gsymcheck</strong> при их проверке. Вполне достаточно добавить <code>numslots=1</code>.</div>
</li>
</ol>

<p>
Теперь, когда все эти атрибуты добавлены, сделайте <code>numslots</code>,
<code>footprint</code>, <code>description</code>, <code>graphical</code> и <code>device</code> невидимыми.
Оставьте видимым только значение атрибута <code>refdes</code> и расположите его
где-нибудь над символом.
</p>

</div>
<!-- EDIT7 SECTION "Добавление атрибутов к символу" [9940-14154] -->
<h3 class="sectionedit8" id="завершение">Завершение</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Добавьте к своему символу обозначение, выбрав <strong><em>Добавить</em></strong> → <strong><em>Текст…</em></strong> [<strong><em>Add</em></strong> → <strong><em>Text…</em></strong>] или нажав <kbd>A</kbd> <kbd>T</kbd>. Наберите своё обозначение и переместите его в верхнюю часть символа.</div>
</li>
<li class="level1"><div class="li"> Сместите символ в начало координат из меню <strong><em>Правка</em></strong> → <strong><em>Смещение символа…</em></strong><br/>
[<strong><em>Edit</em></strong> → <strong><em>Symbol Translate…</em></strong>] или нажмите <kbd>E</kbd> <kbd>T</kbd>.</div>
</li>
<li class="level1"><div class="li"> Введите <code>0</code> в поле ввода и нажмите <strong>OK</strong>.</div>
</li>
<li class="level1"><div class="li"> Сохраните символ с помощью <strong><em>Файл</em></strong> → <strong><em>Сохранить</em></strong> [<strong><em>File</em></strong> → <strong><em>Save</em></strong>] или <strong><em>Файл</em></strong> → <strong><em>Сохранить как…</em></strong> [<strong><em>File</em></strong> → <strong><em>Save As…</em></strong>].</div>
</li>
<li class="level1"><div class="li"> Поместите символ в один из каталогов, заданных как библиотека символов в файле настроек gEDA suite (в одном из файлов <em><code>gafrc</code></em>).  Объяснение того, как настроить библиотеки символов см. в <a href="geda-gschem_ug-config.ru.html" class="wikilink1" title="geda-gschem_ug-config.ru.html">Руководстве пользователя gEDA gschem</a>. Как только это сделано, символ должен немедленно стать видимым и может быть выбран и помещён в схему из меню <strong><em>Добавить</em></strong> → <strong><em>Компонент…</em></strong> [<strong><em>Add</em></strong> → <strong><em>Select Component…</em></strong>]. В Debian помещение файлов в <em><code>/usr/share/gEDA/sym/local/</code></em> работать будет, но потребует настройки привилегий.</div>
</li>
</ol>

</div>

<h4 id="примечание">Примечание</h4>
<div class="level4">

<p>
Смещение символа в начало координат — шаг необходимый. Для смещения
символа в другое место введите величину смещения (в милах), кратную 100.
Убедитесь, что все выводы привязаны к точкам сетки.
</p>

</div>
<!-- EDIT8 SECTION "Завершение" [14155-16360] -->
<h2 class="sectionedit9" id="общие_соглашения_об_именовании_символов">Общие соглашения об именовании символов</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Символы именуются следующим образом: <em><code>symbolname-#.sym</code></em></div>
</li>
<li class="level1"><div class="li"> Имена символов имеют расширение <em><code>.sym</code></em>.</div>
</li>
<li class="level1"><div class="li"> Названия символов содержат число, обозначенное выше знаком <em><code>#</code></em>. Обычно оно равно 1, но если для устройства имеется несколько символов, данное число просто увеличивается.</div>
</li>
<li class="level1"><div class="li"> Обычно имена символов задаются в нижнем регистре, но буквы, составляющие часть типа прибора, указываются в верхнем регистре.</div>
</li>
<li class="level1"><div class="li"> Последнее правило может быть нарушено, если имя файла выглядит некорректно или ошибочно.</div>
</li>
</ol>

</div>
<!-- EDIT9 SECTION "Общие соглашения об именовании символов" [16361-17343] -->
<h2 class="sectionedit10" id="требования_к_символам">Требования к символам</h2>
<div class="level2">

<p>
В данном разделе описываются различные требования, которые необходимо
соблюдать для создания правильного символа в плане отображения его на экране
и создания для него <a href="geda-glossary.ru.html#список_соединений" class="wikilink1" title="geda-glossary.ru.html">списков
соединений</a> в системе gEDA/gaf.
</p>

</div>
<!-- EDIT10 SECTION "Требования к символам" [17344-17826] -->
<h3 class="sectionedit11" id="выводы">Выводы</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> К каждому выводу должен быть прикреплён атрибут <code>pinseq</code>. Это число, определяющее порядок работы программы <strong>gnetlist</strong> с атрибутами. Это просто порядковый номер, последовательно увеличивающийся, начиная с 1.</div>
</li>
<li class="level1"><div class="li"> К каждому выводу должен быть прикреплён атрибут <code>pinnumber</code>. Это номер вывода на корпусе компонента, для которого создаётся этот символ. Номер вывода может быть буквенным или цифровым (то есть можно использовать, например, <code>E</code> или <code>C</code>).</div>
</li>
<li class="level1"><div class="li"> К каждому выводу должен быть также прикреплён атрибут <code>pinlabel</code>. Данный атрибут является названием или меткой вывода (а не номером вывода). Данный атрибут применяется также при использовании символа в иерархической схеме.</div>
</li>
<li class="level1"><div class="li"> К каждому выводу должен быть также прикреплён атрибут <code>pintype</code>. Данный атрибут определяет тип вывода. Допустимыми значениями являются: <code>in</code>, <code>out</code>, <code>io</code>, <code>oc</code>, <code>oe</code>, <code>pas</code>, <code>tp</code>, <code>tri</code>, <code>clk</code>, <code>pwr</code>. Более подробную информацию о нём см. в <a href="geda-master_attributes_list.ru.html#pintype" class="wikilink1" title="geda-master_attributes_list.ru.html">Перечне основных атрибутов</a>.</div>
</li>
</ol>

</div>
<!-- EDIT11 SECTION "Выводы" [17827-19548] -->
<h3 class="sectionedit12" id="атрибуты">Атрибуты</h3>
<div class="level3">

<p>
Более подробную информацию о представленных здесь атрибутах можно найти в
<a href="geda-master_attributes_list.ru.html" class="wikilink1" title="geda-master_attributes_list.ru.html">Перечне основных атрибутов</a>.
</p>
<ol>
<li class="level1"><div class="li"> В символе должен находиться невидимый атрибут <code>device=НАЗВАНИЕ_УСТРОЙСТВА</code>. Обычно название устройства задаётся в верхнем регистре (прописными буквами). Данный атрибут не должен использоваться в качестве обозначения. Для этого следует использовать отдельный текстовый объект. Если символ определяет чисто графический объект, то <code>device=</code> должен иметь значение <code>none</code> (<code>device=none</code>).</div>
</li>
<li class="level1"><div class="li"> Если символ является полностью графическим (как, например, рамка формата основной надписи или символ <em><code>decon</code></em>) в нём должен быть атрибут <code>graphical=1</code>. Символы с данным атрибутом не имеют электрического или схемотехнического назначения. Не забывайте согласно предыдущему требованию устанавливать вместе с данным атрибутом <code>device=none</code>.</div>
</li>
<li class="level1"><div class="li"> В символе должен быть атрибут <code>description=ТЕКСТ</code>. <code>ТЕКСТ</code> должен представлять собой однострочное описание символа.</div>
</li>
<li class="level1"><div class="li"> В символе должен быть атрибут <code>footprint=ИМЯ_КОРПУСА</code>, он может использоваться <a href="geda-glossary.ru.html#генератор_списка_соединений" class="wikilink1" title="geda-glossary.ru.html">генератором списка соединений</a> для <strong>pcb</strong>. <code>ИМЯ_КОРПУСА</code> представляет собой <a href="geda-glossary.ru.html#посадочное_место" class="wikilink1" title="geda-glossary.ru.html">посадочное место</a> для <strong>pcb</strong> или тип корпуса, такой как DIP14 или DIP40. Подробности см. в <a href="geda-pcb_footprint_naming_conventions.ru.html" class="wikilink1" title="geda-pcb_footprint_naming_conventions.ru.html"> Соглашениях по именованию посадочных мест</a>. Если вы используете <strong>gEDA</strong> в связке с <strong>pcb</strong>, то более подробную информацию по данному атрибуту и о том, как его использовать, вы найдёте в <a href="http://pcb.geda-project.org/manual.html" class="urlextern" title="http://pcb.geda-project.org/manual.html" rel="nofollow">документации по pcb</a> и в <em><code>gnetlist/docs/README.pcb</code></em>.</div>
</li>
<li class="level1"><div class="li"> Атрибут <code>refdes=U?</code> должен помещаться во все символы, не являющиеся чисто графическими. Видимым следует сделать только его значение и, когда символ будет помещён в схему, данный атрибут будет вынесен (прикреплён вне символа для обеспечения возможности его редактирования).</div>
</li>
<li class="level1"><div class="li"> Атрибуты <code>label=</code> и <code>name=</code> не должны использоваться в символах, так как это устаревшие атрибуты.</div>
</li>
<li class="level1"><div class="li"> Атрибут <code>netname=</code> не должен использоваться в символах. Он используется только в схемах.</div>
</li>
</ol>

</div>

<h4 id="многосекционные_компоненты">Многосекционные компоненты</h4>
<div class="level4">
<ol>
<li class="level1"><div class="li"> Если компонент содержит несколько элементов (<a href="geda-glossary.ru.html#секция_компонента" class="wikilink1" title="geda-glossary.ru.html">секций</a>) в одном физическом корпусе (как, например, 7400, имеющий 4 элемента 2И-НЕ в одном корпусе), то необходим атрибут <code>numslots=#</code>. Число <code>#</code> задаёт количество элементов в физическом устройстве. В этом случае в символе должен быть атрибут <code>numslots=</code> и его следует сделать невидимым. Другие обязательные атрибуты, относящиеся к <a href="geda-glossary.ru.html#многосекционный_компонент" class="wikilink1" title="geda-glossary.ru.html">многосекционным компонентам</a>, описываются ниже.</div>
</li>
<li class="level1"><div class="li"> Если компонент содержит несколько элементов (секций) в одном физическом корпусе, то для каждой секции необходимо также задать атрибут <code>slotdef=#:#,#,#…</code> Первое число <code>#</code> соответствует номеру секции. Если устройство содержит 4 элемента, то в символе должны быть атрибуты <code>slotdef=1:…</code>, <code>slotdef=2:…</code>, <code>slotdef=3:…</code> и <code>slotdef=4:…</code>, их следует сделать невидимыми. Последующие числа <code>#</code> один к одному соответствуют атрибутам <code>pinseq=#</code> и определяют номер вывода <code>pinnumber=#</code>, который должен устанавливаться при назначении данной секции. В качестве примера того, как всё это должно работать, см. <a href="#пример" title=":geda:gschem_symbol_creation.ru.txt ↵" class="wikilink1">приведённый ниже символ 7400-1.sym</a>.</div>
</li>
<li class="level1"><div class="li"> В символы многосекционных компонентов рекомендуется добавлять атрибут <code>slot=1</code>.</div>
</li>
</ol>

</div>
<!-- EDIT12 SECTION "Атрибуты" [19549-25330] -->
<h2 class="sectionedit13" id="проверка_символа">Проверка символа</h2>
<div class="level2">

<p>
Соответствие всем указанным требованиям проверяется запуском <strong>gsymcheck</strong>.
<strong>gsymcheck</strong> выдаст фатальные ошибки, довольно серьёзные и требующие
исправления.  <strong>gsymcheck</strong> также выдаст предупреждения о требующих
исправления, но не фатальных ошибках.
</p>

</div>
<!-- EDIT13 SECTION "Проверка символа" [25331-25808] -->
<h2 class="sectionedit14" id="стиль">Стиль</h2>
<div class="level2">

<p>
В данном разделе описывается стиль, используемый в стандартной библиотеке
символов gEDA/gaf.
</p>

</div>
<!-- EDIT14 SECTION "Стиль" [25809-25998] -->
<h3 class="sectionedit15" id="текстовые_объекты">Текстовые объекты</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Все текстовые обозначения должны быть размером 10 пунктов.</div>
</li>
<li class="level1"><div class="li"> Текст (текстовые обозначения, но не атрибуты) должен иметь цветовой индекс 9 (text | зелёный).</div>
</li>
<li class="level1"><div class="li"> Для указания инверсных логических уровней используйте специальное кодирование черты над текстом (например, <code>pinlabel=\_Reset\_</code>).</div>
</li>
</ul>

</div>
<!-- EDIT15 SECTION "Текстовые объекты" [25999-26552] -->
<h3 class="sectionedit16" id="атрибуты1">Атрибуты</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> В качестве номеров выводов должны отображаться атрибуты <code>pinnumber</code> (не <code>pinseq</code>), и их размер должен составлять 8 пунктов.</div>
</li>
<li class="level1"><div class="li"> Цветовой индекс прикреплённых атрибутов должен быть равен 5 (attributes | жёлтый). Цвет автоматически устанавливается в жёлтый при прикреплении текстового элемента.</div>
</li>
<li class="level1"><div class="li"> Единственным исключением из данного правила являются атрибуты <code>pinlabel=</code>, цветовой индекс которых должен быть равен 9 (text | зелёный). Если каждый текстовый элемент внутри символа будет жёлтым, символ выглядит чересчур жёлтым.</div>
</li>
<li class="level1"><div class="li"> Атрибуты могут прикрепляться к некоторой части символа. Раньше, для того чтобы атрибуты верхнего уровня (такие как <code>device=</code> или <code>net=</code>) считались атрибутами, их требовалось к чему-либо прикреплять, но сейчас достаточно, чтобы они находились в файле символа в виде <code>имя_атрибута=значение</code>.</div>
</li>
<li class="level1"><div class="li"> Раскрывая немного последнее предложение, добавим, что атрибутом считается любой текстовый элемент вида <code>имя_атрибута=значение</code>. Атрибуты внутри символа не обязательно прикреплять к чему-либо. Чтобы увидеть скрытые атрибуты в <strong>gschem</strong>, выберите <strong><em>Правка</em></strong> → <strong><em>Показать/Скрыть невидимый текст</em></strong> [<strong><em>Edit</em></strong> → <strong><em>Show/Hide Inv Text</em></strong>].</div>
</li>
<li class="level1"><div class="li"> В библиотеке <strong>libgeda</strong> есть система работы с версиями содержимого символа на основе оценки атрибута <code>symversion=</code>. Подробности использования этой схемы работы с версиями см. в <a href="geda-master_attributes_list.ru.html#symversion" class="wikilink1" title="geda-master_attributes_list.ru.html">Перечне основных атрибутов</a>.</div>
</li>
</ul>

</div>
<!-- EDIT16 SECTION "Атрибуты" [26553-29021] -->
<h3 class="sectionedit17" id="графические_примитивы">Графические примитивы</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Цветовой индекс линий, прямоугольников, дуг и других графических объектов должен быть равен 3 (graphic | зелёный).</div>
</li>
<li class="level1"><div class="li"> Цветовой индекс знаков логической инверсии в виде окружностей должен быть равен 6 (logic bubble | голубой).</div>
</li>
<li class="level1"><div class="li"> Если вы не уверены в том, как должен выглядеть новый символ или какой он должен быть величины, то, чтобы получить представление о подходящем виде и размере, взгляните на существующие символы.</div>
</li>
</ul>

</div>
<!-- EDIT17 SECTION "Графические примитивы" [29022-29819] -->
<h3 class="sectionedit18" id="выводы1">Выводы</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Длина выводов должна составлять 300 милов (3 интервала сетки).</div>
</li>
<li class="level1"><div class="li"> Длина выводов, располагаемых рядом со знаком логической инверсии, должна составлять 200 милов (2 интервала сетки), окружность знака логической инверсии должна иметь диаметр 100 милов. Чтобы начертить окружность диаметром 100 милов, нужно изменить размер сетки на 50.</div>
</li>
<li class="level1"><div class="li"> Вывод имеет два конца: один помечен красной точкой, другой — нет. Красная точка означает место подключения соединений. Для правильного размещения активного конца можно либо поворачивать сам вывод, либо вручную отредактировать файл символа, изменив параметр «whichend» нужного вывода. Подробности см. в документации по <a href="geda-file_format_spec.ru.html#вывод" class="wikilink1" title="geda-file_format_spec.ru.html">Формату файлов</a>.</div>
</li>
<li class="level1"><div class="li"> Все концы выводов, предназначенные для соединений, должны размещаться по сетке размером 100 милов. Другие, неактивные концы могут быть при необходимости расположены не по сетке.</div>
</li>
<li class="level1"><div class="li"> Цветовой индекс для выводов должен быть равен 1 (pins | белый).</div>
</li>
<li class="level1"><div class="li"> Выводы (по вертикали) следует размещать на расстоянии 400 милов (4 интервала сетки) за исключением вычерчивания специальных символов, в таких случаях просто старайтесь, чтобы символ хорошо выглядел.</div>
</li>
<li class="level1"><div class="li"> Номера выводов должны располагаться на 50 милов выше вывода, к которому они прикреплены (или ниже; то есть более подходящим по смыслу образом).</div>
</li>
<li class="level1"><div class="li"> Входные выводы размещаются с левой стороны символа, выходные — с правой.</div>
</li>
<li class="level1"><div class="li"> Пожалуйста, не помещайте входы и выходы на одну и ту же сторону символа, если в этом нет абсолютной необходимости.</div>
</li>
<li class="level1"><div class="li"> Можно располагать выводы сверху или снизу символа.</div>
</li>
<li class="level1"><div class="li"> Порядок последовательности выводов (для шин) должен быть от младшего значащего разряда (МЗР) к старшему (СЗР). При вычерчивании выводов, являющихся частью шины, обеспечьте, чтобы МЗР на шине был расположен наверху (или для выводов, которые располагаются вверху или внизу символа, слева от других выводов). Пример правильного порядка вы найдёте в символе <em><code>74/74181-1.sym</code></em> (сверху вниз от A0 до A3 и от B0 до B3). Нарушение данного правила сильно затруднит подключение к шинам.</div>
</li>
<li class="level1"><div class="li"> При размещении выводов логических элементов обязательно располагайте выводы начиная с наименьших порядковых номеров сверху вниз (или слева направо) в порядке их увеличения.</div>
</li>
</ul>

</div>
<!-- EDIT18 SECTION "Выводы" [29820-33777] -->
<h3 class="sectionedit19" id="схемотехника">Схемотехника</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Не чертите выводы питания. Такая информация обычно передаётся посредством атрибутов (смотрите <a href="geda-na_howto.ru.html" class="wikilink1" title="geda-na_howto.ru.html">Мини-HOWTO по атрибуту net=</a>).</div>
</li>
<li class="level1"><div class="li"> Вышеуказанное правило при необходимости может быть нарушено, но имейте в виду, что в большинстве символов стандартной библиотеки выводы питания не показаны.</div>
</li>
<li class="level1"><div class="li"> Имейте в виду, что символы должны быть символическими, они не изображают физический корпус устройства.</div>
</li>
<li class="level1"><div class="li"> По вышеуказанным вопросам есть некоторые разногласия, поэтому следующее тоже будет нормально: располагайте выводы символа логически, так, чтобы они способствовали созданию понятных, незапутанных схем. Заметьте, что часто это не тождественно физическому расположению выводов устройства.</div>
</li>
</ul>

</div>
<!-- EDIT19 SECTION "Схемотехника" [33778-35074] -->
<h2 class="sectionedit20" id="советы_и_подсказки">Советы и подсказки</h2>
<div class="level2">

<p>
В данном разделе приводится несколько советов и подсказок, чтобы облегчить
вам труд по созданию символов.
</p>
<ul>
<li class="level1"><div class="li"> Выводы ДОЛЖНЫ быть выровнены по сетке размером 100.</div>
</li>
<li class="level1"><div class="li"> Избегайте черчения объектов вне сетки. В противном случае вы не сможете перемещать их командой перемещения (если сетка включена), так как объекты будут прилипать к сетке. [Это старая программная ошибка, которая, думаю, уже исправлена, но всё равно остерегайтесь так делать.] Вместо этого используйте команду смещения символа (или перемещайте объект, отключив сетку).</div>
</li>
<li class="level1"><div class="li"> При создании символов нормально устанавливать размер сетки меньше 100 (скажем, 10 или 25), только надо помнить, что его надо вернуть обратно в 100, когда вы будете готовы к смещению символа в начало координат.</div>
</li>
<li class="level1"><div class="li"> Если вы хотите сместить символ куда-то из начала координат, используйте команду <strong><em>Правка</em></strong> → <strong><em>Смещение символа…</em></strong> [<strong><em>Edit</em></strong>→<strong><em>Symbol Translate…</em></strong>] и введите число, не равное нулю. Это число должно быть кратным 100 (например, 1000 или 1100).</div>
</li>
<li class="level1"><div class="li"> Помните, что выводы являются специальными объектами; если вы хотите добавить вывод, убедитесь, что вводите именно вывод, а не линию или соединение. Используйте команду <strong><em>Добавить</em></strong> → <strong><em>Вывод</em></strong> [<strong><em>Add</em></strong> → <strong><em>Pin</em></strong>] для черчения вывода.</div>
</li>
<li class="level1"><div class="li"> Не используйте внутри символа соединений и шин. Это не поддерживается и не имеет особого смысла.</div>
</li>
<li class="level1"><div class="li"> Для выводов должен быть видимым атрибут <code>pinnumber</code>, может быть вместе с <code>pinlabel</code>, если таковой имеется.</div>
</li>
</ul>

</div>
<!-- EDIT20 SECTION "Советы и подсказки" [35075-37666] -->
<h2 class="sectionedit21" id="пример">Пример</h2>
<div class="level2">

<p>
В данном разделе приведён простой пример, в котором мы стараемся следовать
всем вышеуказанным правилам. Это символ 7400 (И-НЕ).
</p>
<dl class="code">
<dt><a href="/./_export/code/:geda:gschem_symbol_creation.ru.txt?codeblock=0" title="Download Snippet" class="mediafile mf_sym">7400-1.sym</a></dt>
<dd><pre class="code gschem">v 20031231 1
L 300 200 300 800 3 0 0 0 -1 -1
T 300 0 9 8 1 0 0 0 1
7400
L 300 800 700 800 3 0 0 0 -1 -1
T 500 900 5 10 0 0 0 0 1
device=7400
T 500 1100 5 10 0 0 0 0 1
slot=1
T 500 1300 5 10 0 0 0 0 1
numslots=4
T 500 1500 5 10 0 0 0 0 1
slotdef=1:1,2,3
T 500 1700 5 10 0 0 0 0 1
slotdef=2:4,5,6
T 500 1900 5 10 0 0 0 0 1
slotdef=3:9,10,8
T 500 2100 5 10 0 0 0 0 1
slotdef=4:12,13,11
L 300 200 700 200 3 0 0 0 -1 -1
A 700 500 300 270 180 3 0 0 0 -1 -1
V 1050 500 50 6 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
P 1100 500 1300 500 1 0 1
{
T 1100 550 5 8 1 1 0 0 1
pinnumber=3
T 1100 450 5 8 0 1 0 2 1
pinseq=3
T 950 500 9 8 0 1 0 6 1
pinlabel=Y
T 950 500 5 8 0 1 0 8 1
pintype=out
}
P 300 300 0 300 1 0 1
{
T 200 350 5 8 1 1 0 6 1
pinnumber=2
T 200 250 5 8 0 1 0 8 1
pinseq=2
T 350 300 9 8 0 1 0 0 1
pinlabel=B
T 350 300 5 8 0 1 0 2 1
pintype=in
}
P 300 700 0 700 1 0 1
{
T 200 750 5 8 1 1 0 6 1
pinnumber=1
T 200 650 5 8 0 1 0 8 1
pinseq=1
T 350 700 9 8 0 1 0 0 1
pinlabel=A
T 350 700 5 8 0 1 0 2 1
pintype=in
}
T 300 900 8 10 1 1 0 0 1
refdes=U?
T 500 2250 5 10 0 0 0 0 1
footprint=DIP14
T 500 2450 5 10 0 0 0 0 1
description=4 NAND gates with 2 inputs
T 500 2850 5 10 0 0 0 0 1
net=Vcc:14
T 500 3050 5 10 0 0 0 0 1
net=GND:7
T 500 2650 5 10 0 0 0 0 1
documentation=http://www-s.ti.com/sc/ds/sn74hc00.pdf</pre>
</dd></dl>

<p>
Результат, полученный в данном примере, выглядит в <strong>gschem</strong> следующим
образом:
</p>

<p>
<a href="media/geda/symbol_7400-1_hidden.png" class="media" target="_blank" title="geda:symbol_7400-1_hidden.png"><img src="media/geda/symbol_7400-1_hidden.png" class="media" title=":geda:symbol_7400-1_hidden.png" alt=":geda:symbol_7400-1_hidden.png" /></a>
</p>

<p>
Вот тот же самый символ, весь скрытый текст которого видим (меню
<strong><em>Правка</em></strong> → <strong><em>Показать/Скрыть невидимый текст</em></strong> [<strong><em>Edit</em></strong> →
<strong><em>Show/Hide Inv Text</em></strong>]):
</p>

<p>
<a href="media/geda/symbol_7400-1.png" class="media" target="_blank" title="geda:symbol_7400-1.png"><img src="media/geda/symbol_7400-1.png" class="media" title=":geda:symbol_7400-1.png" alt=":geda:symbol_7400-1.png" /></a>
</p>

</div>
<!-- EDIT21 SECTION "Пример" [37667-] --></body>
</html>

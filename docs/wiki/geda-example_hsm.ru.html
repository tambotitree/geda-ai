<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <link rel="stylesheet" media="screen" type="text/css" href="./style.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="./design.css" />
  <link rel="stylesheet" media="print" type="text/css" href="./print.css" />

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>

<p>
<em>Эта страница доступна также на следующих языках:</em> <a href="geda-example_hsm.html" class="wikilink1" title="geda-example_hsm.html">English</a>
</p>

<h1 class="sectionedit1" id="иерархическая_spice-модель">Иерархическая SPICE-модель</h1>
<div class="level1">

<p>
Пример иерархической аналоговой высокочастотной SPICE-модели расположен в
каталоге<br/>

<strong><code>${prefix}/share/doc/geda-gaf/examples/RF_Amp</code></strong>,<br/>

где <code>${prefix}</code> — установочный префикс для gEDA в вашей системе (обычно
<strong><code>/usr</code></strong> или <strong><code>/usr/local</code></strong>).
</p>
<pre class="code">Этот файл README создан 31.03.2003

--------------------- Содержимое каталогов -----------------------

Этот каталог содержит схемы и другие материалы для SPICE-модели биполярного
УВЧ компании Agilent MSA-2643. Модель получена из спецификации Agilent
5980-2396E. Структура каталогов следующая:

RF_Amp (основной каталог)

MSA-2643.sch -- схема содержимого корпуса устройства (в соответствии
  со с. 7 спецификации). Обратите внимание, что я не включил в эту
  схему линии передачи, так как их импеданс не был указан в
  спецификации. (Да, скорее всего он равен 50 Ом, но его включение
  было мелочью по сравнению с моей основной целью -- построить
  иерархическую модель высокочастотной схемы.)
MSA-2643.cir -- готовый для SPICE-моделирования список соединений
  схемы.

Q1.sch -- принципиальная схема модели транзистора Q1 (MSA-26),
  представленная на с. 8 спецификации
Q1.cir -- список соединений, содержащий модель .SUBCKT для Q1.

Q2.sch -- принципиальная схема модели транзистора Q2 (MSA-26),
  представленная на с. 8 спецификации
Q2.cir -- список соединений, содержащий модель .SUBCKT для Q2.

README -- данный файл.

Simulation.cmd -- файл, содержащий команды SPICE-анализа, который читается в
процессе моделирования программой SPICE-моделирования.

5980-2396E.pdf -- Спецификация Agilent для MSA-2643.


./model/

BJTM1_Q1.mod -- SPICE-модель BJT1 в текстовом формате, используемая в
  .SUBCKT для Q1
DiodeM1_Q1.mod -- SPICE-модель диода M1 в текстовом формате,
  используемая в .SUBCKT для Q1
DiodeM2_Q1.mod -- SPICE-модель диода M2, используемая в .SUBCKT для Q1
DiodeM3_Q1.mod -- SPICE-модель диода M3, используемая в .SUBCKT для Q1
(такие же файлы для моделей элементов Q2...)
Данные модели сделаны по параметрам, указанным на с. 8 спецификации.

./sym/

BJT_Model.sym
spice-subcircuit-IO-1.sym
spice-subcircuit-LL-1.sym
Q_Model.sym -- символ, ссылающийся на низкоуровневые модели,
и помещаемый в основную схему.

------------ Использование иерархических SPICE-моделей ---------------------
Настоящий проект служит примером осуществления в gEDA SPICE-моделирования
для иерархической модели. Проект строится следующим образом:

1.  Создайте в текстовом редакторе файлы .mod, содержащие SPICE-модели
транзисторов и диодов, указанные на с. 8 спецификации.

2.  В gschem начертите схемы моделей транзисторов Q1 и Q2. Поместите в
схему SPICE-блок .SUBCKT для указания генератору списка соединений,
что эта схема является подсхемой .SUBCKT, предназначенной для
включения в другие схемы. Добавьте в схему символы spice-IO для
создания входов-выходов. Обязательно пронумеруйте символы spice-IO в
том же порядке, в котором они должны появляться в строке .SUBCKT файла
.cir.

3.  Создайте список соединений .SUBCKT, сказав:

gnetlist -g spice-sdb -o Q1.cir Q1.sch
gnetlist -g spice-sdb -o Q2.cir Q2.sch

4.  Создайте символ для Q1.cir и Q2.cir для добавления его в основную
схему. Назовите этот символ Q_Model.sym. Установите значение атрибута
«device» символа в NPN_TRANSISTOR_subcircuit. Это заставит генератор
списка соединений для выдачи строки SPICE для компонента использовать
«write-default-component». Убедитесь, что атрибут «refdes» установлен
в X?, а не в Q? -- это позволит прикрепить к устройству файл .SUBCKT.

5.  Создайте основную схему MSA-2643.sch. Добавьте в неё две копии
Q_Model.sym, соответственно для Q1 и Q2.  Чтобы Q1 указывал на свою
модель, установите следующие атрибуты:

model-name: Q1_MSA26F
file: Q1.cir

То же самое сделайте для Q2.

6.  Начертите остальную часть основной схемы обычным способом. Не
забудьте добавить в схему блок spice-include и сделать так, чтобы он
указывал на «Simulation.cmd». Добавьте в файл «Simulation.cmd»
какие-нибудь команды анализа (например, .DC, .AC, .TRAN и т. д.).

7.  Создайте список соединений для основной схемы проекта:

gnetlist -g spice-sdb -o MSA-2643.cir MSA-2643.sch

8.  Моделирование для схемы можно произвести в любой желаемой
программе моделирования и анализа SPICE, например в LTSpice.

-------------------- Contact ----------------------------
Документация и другие материалы, относящиеся к SPICE-моделированию в gEDA,
находятся на странице http://www.brorson.com/gEDA/SPICE

С вопросами и отчётами об ошибках обращайтесь ко мне:

Stuart Brorson
mailto:sdb@cloud9.net</pre>

</div>
<!-- EDIT1 SECTION "Иерархическая SPICE-модель" [120-] --></body>
</html>
